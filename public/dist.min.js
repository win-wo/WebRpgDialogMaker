app=angular.module("WebRpgDialogMaker",["ngRoute"]),app.Data={},app.config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),app.config(["$routeProvider",function(e){e.when("/manage",{templateUrl:"public/services/manage/index.html",controller:"ManagePageController",controllerAs:"ManagePage"}).when("/edit/",{templateUrl:"public/services/edit/index.html",controller:"EditPageController",controllerAs:"EditPage"}).when("/demo/:dialogId",{templateUrl:"public/services/demo/index.html",controller:"DemoPageController",controllerAs:"DemoPage"}).otherwise({redirectTo:"/manage"})}]),function(){function e(){var e=this;e.appName="Project Chaptr",e.notifications=app.Data.NofiticationRepository.notifications,app.Data.NofiticationRepository.add("success","YEAH"),e.removeNotification=function(e){app.Data.NofiticationRepository.remove(e)}}app.controller("AppController",e)}(),function(){function e(){this.notifications=[],this.add=function(e,a){this.notifications.push({type:e,message:a})},this.remove=function(e){this.notifications.splice()}}app.Data.NofiticationRepository=new e}(),function(){function e(e,a){function n(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=16*Math.random()|0,n="x"==e?a:3&a|8;return n.toString(16)});return e}function o(){return JSON.parse(localStorage.chapter)}function t(){localStorage.chapter=JSON.stringify(i.chapter)}var i=this;i.newDialog={},i.chapter=o()||{id:null,name:null,number:null,language:null,dialogs:[]},i.addNewDialog=function(){var e=new a;e.id=n(),e.name=i.newDialog.name,e.number=i.newDialog.number,e.language=i.newDialog.language,i.chapter.dialogs.push(e),i.newDialog={}},i.saveDialog=function(){var e=new a;e.id=i.newDialog.id,e.name=i.newDialog.name,e.number=i.newDialog.number,e.language=i.newDialog.language;var n=_.findIndex(i.chapter.dialogs,{id:e.id});-1!=n&&(i.chapter.dialogs[n]=e)},i.selectDialog=function(e){i.newDialog=e},i.deleteDialog=function(e){_.remove(i.chapter.dialogs,{id:e.id})},i.runDialog=function(a){e.path("/demo/"+a.id)},i.saveToStorage=function(){t()}}app.controller("EditPageController",e),e.$inject=["$location","DialogModel"]}(),function(){function e(){}app.controller("DemoPageController",e)}(),function(){function e(){function e(e){try{var n=JSON.parse(e);a(n),localStorage.chapter=e}catch(o){app.Data.NofiticationRepository.add("danger","Data is not readable or invalid")}}function a(e){if(!e)throw new Error("Chapter is null");if(!e.id)throw new Error("Missing id");if(!e.name)throw new Error("Missing name");if(!e.number)throw new Error("Missing number");if(!e.language)throw new Error("Missing language");if(!e.dialogs)throw new Error("Missing dialogs")}var n=this;n.file=null,n.exportedData=null,n.importData=function(){var a=angular.element("#manage-page-file-import")[0],n=a.files[0],o=new FileReader;o.onload=function(a){e(o.result)},o.readAsText(n)},n.exportData=function(){try{localStorage.chapter&&(n.exportedData=encodeURIComponent(JSON.stringify(localStorage.chapter)))}catch(e){app.Data.NofiticationRepository.add("danger","No chapter to export")}}}app.controller("ManagePageController",e)}(),function(){function e(){this.id=null,this.name=null,this.number=null,this.language=null}app.factory("DialogModel",function(){return e})}();
//# sourceMappingURL=dist.min.js.map
