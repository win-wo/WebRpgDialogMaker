app=angular.module("WebRpgDialogMaker",["ngRoute"]),app.config(["$routeProvider",function(e){e.when("/manage",{templateUrl:"public/services/manage/index.html",controller:"ManagePageController",controllerAs:"ManagePage"}).when("/edit/",{templateUrl:"public/services/edit/index.html",controller:"EditPageController",controllerAs:"EditPage"}).when("/demo/:dialogId",{templateUrl:"public/services/demo/index.html",controller:"DemoPageController",controllerAs:"DemoPage"}).otherwise({redirectTo:"/manage"})}]),function(){function e(){var e=this;e.appName="Project Chaptr"}app.controller("AppController",e)}(),function(){function e(){}app.controller("DemoPageController",e)}(),function(){function e(e,n){function a(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0,a="x"==e?n:3&n|8;return a.toString(16)});return e}function o(){return JSON.parse(localStorage.chapter)}function r(){localStorage.chapter=JSON.stringify(l.chapter)}var l=this;l.newDialog={},l.chapter=o()||{id:null,name:null,number:null,language:null,dialogs:[]},l.addNewDialog=function(){var e=new n;e.id=a(),e.name=l.newDialog.name,e.number=l.newDialog.number,e.language=l.newDialog.language,l.chapter.dialogs.push(e),l.newDialog={}},l.saveDialog=function(){var e=new n;e.id=l.newDialog.id,e.name=l.newDialog.name,e.number=l.newDialog.number,e.language=l.newDialog.language;var a=_.findIndex(l.chapter.dialogs,{id:e.id});-1!=a&&(l.chapter.dialogs[a]=e)},l.selectDialog=function(e){l.newDialog=e},l.deleteDialog=function(e){_.remove(l.chapter.dialogs,{id:e.id})},l.runDialog=function(n){e.path("/demo/"+n.id)},l.saveToStorage=function(){r()}}app.controller("EditPageController",e),e.$inject=["$location","DialogModel"]}(),function(){function e(){function e(e){try{var n=JSON.parse(e);if(!n.id)throw new Error("Missing id");if(!n.name)throw new Error("Missing name");if(!n.number)throw new Error("Missing number");if(!n.language)throw new Error("Missing language");if(!n.dialogs)throw new Error("Missing dialogs");localStorage.chapter=e}catch(a){console.error("Data is not readable or invalid : "+a.message)}}var n=this;n.file=null,n.importData=function(){var n=angular.element("#manage-page-file-import")[0],a=n.files[0],o=new FileReader;o.onload=function(n){e(o.result)},o.readAsText(a)},n.exportData=function(){var e=localStorage.chapter,n="data:text/json;charset=utf8,"+encodeURIComponent(e);window.open(n,"_blank"),window.focus()}}app.controller("ManagePageController",e)}(),function(){function e(){this.id=null,this.name=null,this.number=null,this.language=null}app.factory("DialogModel",function(){return e})}();
//# sourceMappingURL=dist.min.js.map
