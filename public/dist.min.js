app=angular.module("WebRpgDialogMaker",["ngRoute"]),app.Data={},app.config(["$compileProvider",function(o){o.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),app.config(["$routeProvider",function(o){o.when("/edit",{templateUrl:"public/services/edit/index.html",controller:"EditPageController",controllerAs:"EditPage"}).otherwise({redirectTo:"/edit"})}]),function(){function o(){var o=this;o.appName="Project Chaptr",o.chapter}app.controller("AppController",o)}(),function(){function o(){this.notifications=[],this.add=function(o,i){this.notifications.push({type:o,message:i})},this.remove=function(o){this.notifications.splice()}}app.Data.NofiticationRepository=new o}(),function(){function o(o){function i(){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=16*Math.random()|0,t="x"==o?i:3&i|8;return t.toString(16)});return o}function t(){try{return JSON.parse(localStorage.chapter)}catch(o){return null}}function a(){localStorage.chapter=JSON.stringify(r.chapter)}function n(o){try{var i=JSON.parse(o);e(i),localStorage.chapter=o}catch(t){app.Data.NofiticationRepository.add("danger","Data is not readable or invalid")}}function e(o){if(!o)throw new Error("Chapter is null");if(!o.id)throw new Error("Missing id");if(!o.name)throw new Error("Missing name");if(!o.number)throw new Error("Missing number");if(!o.language)throw new Error("Missing language");if(!o.dialogs)throw new Error("Missing dialogs")}var r=this;r.chapter=t()||{id:null,name:null,number:null,language:null,dialogs:[]},r.dialogModal={id:"#dialogModal",dialog:{}},r.file=null,r.exportedData=null,r.showDialogModal=function(o){angular.copy(o,r.dialogModal.dialog),$(r.dialogModal.id).modal()},r.saveDialog=function(o){var t={};angular.copy(o,t),t.id=t.id||i();var a=_.findIndex(r.chapter.dialogs,{id:t.id});-1!=a?r.chapter.dialogs[a]=t:r.chapter.dialogs.push(t),$(r.dialogModal.id).modal("hide")},r.selectDialog=function(o){r.updateDialogWindowVisible,angular.copy(o,r.dialogModal.dialog)},r.deleteDialog=function(o){_.remove(r.chapter.dialogs,{id:o.id})},r.demoDialog=function(o){},r.saveToStorage=function(){a()},r.importData=function(){var o=angular.element("#toolbar-file-import")[0],i=o.files[0],t=new FileReader;t.onload=function(o){n(t.result)},t.readAsText(i)},r.exportData=function(){try{localStorage.chapter&&(r.exportedData=encodeURIComponent(JSON.stringify(localStorage.chapter)))}catch(o){app.Data.NofiticationRepository.add("danger","No chapter to export")}},r.updateChapterJson=function(){r.chapterJson=JSON.stringify(r.chapter,void 0,2)}}app.controller("EditPageController",o),o.$inject=["$location"]}(),function(){function o(){}app.controller("ToolbarController",o)}(),function(){function o(){var o=this;o.notifications=app.Data.NofiticationRepository.notifications,o.removeNotification=function(o){app.Data.NofiticationRepository.remove(o)}}app.controller("NotificationsController",o)}();
//# sourceMappingURL=dist.min.js.map
