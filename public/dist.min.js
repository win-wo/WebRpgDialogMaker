app=angular.module("WebRpgDialogMaker",["ngRoute"]),app.Data={},app.config(["$compileProvider",function(o){o.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),app.config(["$routeProvider",function(o){o.when("/edit",{templateUrl:"public/services/edit/index.html",controller:"EditPageController",controllerAs:"EditPage"}).otherwise({redirectTo:"/edit"})}]),function(){function o(){var o=this;o.appName="Project Chaptr",o.chapter}app.controller("AppController",o)}(),app.factory("Notifications",function(){var o={};return o.list=[],o.add=function(a,t){o.list.push({type:a,message:t})},o}),function(){function o(o,a){function t(){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=16*Math.random()|0,t="x"==o?a:3&a|8;return t.toString(16)});return o}function i(){try{return JSON.parse(localStorage.chapter)}catch(o){return null}}function e(){localStorage.chapter=JSON.stringify(l.chapter)}function r(o){try{var t=JSON.parse(JSON.parse(o));n(t),localStorage.chapter=o}catch(i){a.add("danger","File is not valid : "+i.message)}}function n(o){if(!o)throw new Error("Chapter is null");if(!o.id)throw new Error("Missing id");if(!o.name)throw new Error("Missing name");if(!o.number)throw new Error("Missing number");if(!o.language)throw new Error("Missing language");if(!o.dialogs)throw new Error("Missing dialogs")}var l=this;l.chapter=i()||{id:t(),name:null,number:null,language:null,dialogs:[]},l.dialogModal={id:"#dialogModal",dialog:{}},l.file=null,l.exportedData=null,l.showDialogModal=function(o){angular.copy(o,l.dialogModal.dialog),$(l.dialogModal.id).modal()},l.saveDialog=function(o){var a={};angular.copy(o,a),a.id=a.id||t();var i=_.findIndex(l.chapter.dialogs,{id:a.id});-1!=i?l.chapter.dialogs[i]=a:l.chapter.dialogs.push(a),$(l.dialogModal.id).modal("hide")},l.selectDialog=function(o){l.updateDialogWindowVisible,angular.copy(o,l.dialogModal.dialog)},l.deleteDialog=function(o){_.remove(l.chapter.dialogs,{id:o.id})},l.demoDialog=function(o){},l.saveToStorage=function(){e()},l.importData=function(){try{var o=angular.element("#toolbar-file-import")[0];if(0==o.files.length)throw new Error("No file selected");var t=o.files[0],i=new FileReader;i.onload=function(o){r(i.result)},i.readAsText(t)}catch(e){a.add("danger","Impossible to import : "+e.message)}},l.exportData=function(){try{localStorage.chapter&&(l.exportedData=encodeURIComponent(JSON.stringify(localStorage.chapter)))}catch(o){a.add("danger","Impossible to export, please save your data first")}},l.updateChapterJson=function(){l.chapterJson=JSON.stringify(l.chapter,void 0,2)}}app.controller("EditPageController",o),o.$inject=["$location","Notifications"]}(),function(){function o(o){var a=this;a.notifications=o.list,a.removeNotification=function(o){a.notifications.splice(o,1)}}app.controller("NotificationsController",o),o.$inject=["Notifications"]}(),function(){function o(){}app.controller("ToolbarController",o)}();
//# sourceMappingURL=dist.min.js.map
